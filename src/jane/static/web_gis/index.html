<!DOCTYPE html>
<html lang="en" ng-app="bayNetApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="LMU Geophysik/Seismologie">

    <title>Induzierte Seismizität in Bayern</title>

    <!--Components CSS-->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"
          rel="stylesheet" type="text/css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css"
          rel="stylesheet" type="text/css">
    <link href="./css/ol_3.13.1.css" rel="stylesheet" type="text/css">
    <link href="./css/bootstrap-additions.0.2.3.min.css" rel="stylesheet"
          type="text/css">
    <link href="./css/bootstrap-slider.4.0.5.min.css" rel="stylesheet"
          type="text/css">
    <link href="./css/angular-toggle-switch-bootstrap-3.css" rel="stylesheet"
          type="text/css">

    <!--Baynet CSS-->
    <link href="./css/baynet.css" rel="stylesheet" type="text/css">

    <!--Components JS-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="./js/bootstrap-slider.4.0.5.min.js"></script>
    <script src="./js/jszip.min.js"></script>
    <script src="./js/FileSaver.min.js"></script>
    <!--<script src="/js/bootstrap-switch.3.0.2.min.js"></script>-->

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-sanitize.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-animate.min.js"></script>
    <script src="./js/angular-locale_de-de.1.2.25.js"></script>

    <script src="./js/angular-strap.2.1.1.min.js"></script>
    <script src="./js/angular-strap.tpl.2.1.1.min.js"></script>
    <script src="./js/angular-bootstrap-slider.js"></script>
    <script src="./js/angular-toggle-switch.min.js"></script>

    <script src="./js/ol_3.13.1.js"></script>

    <!--Baynet JS-->
    <script src="./src/baynetapp.js"></script>
    <script src="./src/controllers/event_info_controller.js"></script>
    <script src="./src/controllers/station_info_controller.js"></script>
    <script src="./src/controllers/geojson_info_controller.js"></script>
    <script src="./src/controllers/event_download_controller.js"></script>
    <script src="./src/main.js"></script>
    <script src="./src/directives/map.js"></script>


</head>

<body ng-controller="BayNetController">

<div id="sidebar">
    <div class="container-fluid"
         ng-class="{green_background: current_user, orange_background: !current_user}">
    <span ng-show="current_user">Logged in as <b>{{ current_user }}</b>
        <span class="pull-right">
        <a style="padding-top: 5px"
                href="/rest/api-auth/logout/?next=/static/web_gis/index.html">Logout</a>
        </span>
    </span>
            <a ng-hide="current_user"
               href="/rest/api-auth/login/?next=/static/web_gis/index.html">Login</a>
    </div>

    <div class="container-fluid">
        <h3>Induzierte Seismizität in Bayern</h3>
    </div>


    <div class="sidebar-header">

        <toggle-switch model="show_event_layer" class="switch-mini"
                       on-label="An" off-label="Aus"
                       style="position:absolute; margin-top:5px; margin-left: 5px">
        </toggle-switch>
        <span class="input-group-addon">
            <span ng-if="geojson_events.features == null"><i class="fa fa-spinner fa-spin"></i></span>
            <span ng-if="geojson_events.features != null"><i class="fa fa-dot-circle-o"></i></span>
            Erdbeben
            <!--NEEDS DIFFERENT WAY TO LAYOUT!-->
            <toggle-switch model="event_layer_show_points"
                           class="switch-mini switch-default"
                           on-label="Punkte" off-label="Heatmap"
                           style="position:absolute;
                           margin-top: -2px; margin-left: 50px">
            </toggle-switch>
        </span>
        </toggle-switch>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-calendar"></i>
                    <small>Zeitraum</small>
                </label>
            </div>
            <div class="col-md-4 event-timepicker">
                <input type="text" class="form-control"
                       ng-model="event_settings.min_date"
                       data-max-date="{{ untilDate }}" placeholder="Von"
                       data-date-format="dd.MM.yyyy"
                       bs-datepicker>
            </div>
            <div class="col-md-4 event-timepicker">
                <input type="text" class="form-control"
                       ng-model="event_settings.max_date"
                       data-min-date="{{ fromDate }}" placeholder="Bis"
                       data-date-format="dd.MM.yyyy"
                       bs-datepicker>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-arrows-h"></i>
                    <small>Magnitude</small>
                </label>
            </div>
            <div class="col-md-1 magnitude-label" style="text-align: right">
                {{ event_settings.magnitude_range[0]}}
            </div>
            <div class="col-md-6">
                <slider
                        ng-model="event_settings.magnitude_range"
                        min="-2"
                        step="0.2"
                        precision="1"
                        max="4.0"
                        data-slider-tooltip="hide"
                        value="{{ event_settings.magnitude_range }}">
                </slider>
            </div>
            <div class="col-md-1 magnitude-label" style="text-align: left">
                {{ event_settings.magnitude_range[1]}}
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>
                    <small>
                        Farbkodierung
                    </small>
                </label>
            </div>
            <div class="col-md-4">
                <toggle-switch model="event_settings.color_coding_switch"
                               class="switch-mini switch-default"
                               on-label="Standort" off-label="Agency"
                               style="width:100%">
                </toggle-switch>
            </div>
        </div>

        <div class="row" style="padding-top:10px">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-institution"></i>
                    <small>Standorte</small>
                </label>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-default btn-xs"
                        ng-model="event_settings.selected_sites"
                        data-html="1" data-multiple="1"
                        data-animation="am-flip-x"
                        ng-options="icon.value as icon.label for icon in event_settings.site_icons"
                        bs-select>
                    Action <span class="caret"></span>
                </button>
            </div>
        </div>

        <div class="row" style="padding-top:10px">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-institution"></i>
                    <small>Agencies</small>
                </label>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-default btn-xs"
                        ng-model="event_settings.selected_agencies"
                        data-html="1" data-multiple="1"
                        data-animation="am-flip-x"
                        ng-options="icon.value as icon.label for icon in event_settings.agency_icons"
                        bs-select>
                    Action <span class="caret"></span>
                </button>
            </div>
        </div>

        <div class="row" style="padding-top:10px">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-users"></i>
                    <small>Autoren</small>
                </label>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-default btn-xs"
                        ng-model="event_settings.selected_authors"
                        data-html="1" data-multiple="1"
                        data-animation="am-flip-x"
                        ng-options="icon.value as icon.label for icon in event_settings.available_authors"
                        bs-select>
                    bs-select>
                    Action <span class="caret"></span>
                </button>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>
                    <small>
                        Status
                    </small>
                </label>
            </div>
            <div class="col-md-4">
                <toggle-switch model="event_settings.show_public_and_private"
                               class="switch-mini switch-default"
                               on-label="alle" off-label="öffentliche"
                               style="width:100%">
                </toggle-switch>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label title="Unsicherheiten des Epizentrums anzeigen?">
                    <small>
                        Unsicherheiten
                    </small>
                </label>
            </div>
            <div class="col-md-4">
                <toggle-switch model="event_settings.show_uncertainties"
                               class="switch-mini switch-default"
                               on-label="an" off-label="aus"
                               style="width:100%">
                </toggle-switch>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <small><i class="fa fa-search"></i> <b>Anzeigbare Ereignisse:
                        {{ geojson_events.features.length }}</b>
                </small>
            </div>
        </div>


    </div>

    <div class="sidebar-header">
        <toggle-switch model="show_station_layer" class="switch-mini"
                       on-label="An" off-label="Aus"
                       style="position:absolute; margin-top:5px; margin-left: 5px">
        </toggle-switch>
        <span class="input-group-addon">
            <span ng-if="geojson_stations.features == null"><i class="fa fa-spinner fa-spin"></i></span>
            <span ng-if="geojson_stations.features != null"><i class="fa fa-map-marker"></i></span>
            Stationen
        </span>
    </div>


    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <label>
                    <i class="fa fa-calendar"></i>
                    <small>Zeitraum</small>
                </label>
            </div>
            <div class="col-md-4 event-timepicker">
                <input type="text" class="form-control"
                       ng-model="station_settings.min_date"
                       data-max-date="{{ untilDate }}" placeholder="Von"
                       data-date-format="dd.MM.yyyy"
                       bs-datepicker>
            </div>
            <div class="col-md-4 event-timepicker">
                <input type="text" class="form-control"
                       ng-model="station_settings.max_date"
                       data-min-date="{{ fromDate }}" placeholder="Bis"
                       data-date-format="dd.MM.yyyy"
                       bs-datepicker>
            </div>
        </div>

        <div class="row" style="padding-top: 10px">
            <div class="col-md-2" style="white-space:nowrap; overflow:hidden"
                 ng-repeat="(network, color) in station_colors">
                <span style="color:{{ color }}">▼</span>
                <small><label>{{ network }}</label></small>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <label>
                    <small>
                        aktuell nicht mehr laufende Stationen ausgrauen?
                    </small>
                </label>
            </div>
            <div class="col-md-4">
                <toggle-switch
                        model="station_settings.grey_out_inactive_stations"
                        class="switch-mini"
                        on-label="Ja" off-label="Nein"
                        style="width:100%">
                </toggle-switch>
            </div>
        </div>


    </div>


    <div class="sidebar-header">
        <toggle-switch model="show_geojson_layer" class="switch-mini"
                       on-label="An" off-label="Aus"
                       style="position:absolute; margin-top:5px; margin-left: 5px">
        </toggle-switch>
        <span class="input-group-addon">
            <span ng-if="geojson_geojson.features == null"><i class="fa fa-spinner fa-spin"></i></span>
            <span ng-if="geojson_geojson.features != null"><i class="fa fa-object-ungroup"></i></span>
            Zusätzliche Objekte
        </span>
    </div>

    <div class="container-fluid">

        <div class="row">
            <div class="col-md-4">
                <label>
                    <small>Kategorien</small>
                </label>
            </div>
            <div class="col-md-8">
                <button type="button" class="btn btn-default btn-xs"
                        ng-model="geojson_settings.selected_categories"
                        data-html="1" data-multiple="1"
                        data-animation="am-flip-x"
                        ng-options="label for label in geojson_settings.available_categories"
                        bs-select>
                    Action <span class="caret"></span>
                </button>
            </div>
        </div>

<!--
        <div class="row">
            <div class="col-md-12">
                <small><i class="fa fa-search"></i> <b>Anzeigbare zusätzliche Objekte:
                        {{ geojson_geojson.features.length }}</b>
                </small>
            </div>
        </div>
-->

    </div>

    <div class="sidebar-header">
        <span class="input-group-addon">
            <i class="fa fa-map-o"></i> Karten Einstellungen
        </span>
    </div>

    <div class="container-fluid">
        <div class="row">

            <div class="col-md-4">
            <small><i class="fa fa-map-o"></i> Karten Layer</small>
            </div>

            <div class="col-md-8">
                <div class="dropdown">
                    <button class="btn btn-default btn-xs dropdown-toggle"
                            style="width:100%"
                            type="button"
                            data-animation="am-flip-x"
                            bs-dropdown="base_layer_names_dropdown">
                        {{ current_base_layer }}
                        <span class="caret"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col-md-4">
              <small><i class="fa fa-rotate-right"></i> Rotation: {{ rotation }}°</small>
            </div>

            <div class="col-md-8">
                <slider
                        ng-model="rotation"
                        data-slider-tooltip="hide"
                        min="0"
                        step="1"
                        max="360"
                        value="0">
                </slider>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">

            <div class="col-md-4">
                <small>Deckkraft: {{ base_layer_opacity }}%</small>
            </div>

            <div class="col-md-8">
                <slider
                        ng-model="base_layer_opacity"
                        data-slider-tooltip="hide"
                        min="0"
                        step="1"
                        max="100"
                        value="100">
                </slider>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <small>Landesgrenze</small>
            </div>
            <div class="col-md-8">
                <toggle-switch model="show_bavaria_outline"
                               class="switch-mini"
                               on-label="An" off-label="Aus">
                </toggle-switch>
            </div>
        </div>
        <div class="row" style="padding-top: 5px">
            <div class="col-md-3">
                <small>Zoomen auf</small>
            </div>
            <div class="col-md-9">
                <a type="button"
                   class="btn btn-default btn-xs"
                   ng-click="panTo(11.5, 48.6, 8)">Bayern</a>
                <a type="button"
                   class="btn btn-default btn-xs"
                   ng-click="panTo(11.65, 48.1, 10)">München</a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <i class="small">Shift + Box ziehen: Zoom auf Gebiet</i>
            </div>
        </div>
    </div>

</div>

<openlayers3 id="map">
    <div id="event_tooltip"></div>
    <div id="station_tooltip"></div>
</openlayers3>

</body>
</html>
